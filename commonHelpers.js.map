{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// Your API key: 44781462-ae4aaccc0a5ec19c0259ffb3b\n\n// q =  — слово для пошуку. Те, що буде вводити користувач.\n//— тип зображення. Потрібні тільки фотографії, тому постав значення photo.//\n//орієнтація фотографії. Постав значення horizontal.\n//safesearch — фільтр за віком. Постав значення true.\n//\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n//\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n//\n//\nconst loader = document.querySelector('#loader');\nconst form = document.querySelector('#search-form');\nconst api = 'https://pixabay.com/api/';\nconst apiKey = '44781462-ae4aaccc0a5ec19c0259ffb3b';\nconst imageType = 'photo';\nconst orientation = ' horizontal';\nconst safeSearch = true;\nconst gallery = document.querySelector('.gallery');\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  cationsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction fetchImage(q) {\n  const url = `${api}?key=${apiKey}&q=${encodeURIComponent(\n    q\n  )}&image_type=${imageType}&orientation=${orientation}&safesearch=${safeSearch}`;\n  loader.style.display = 'block';\n\n  return fetch(url)\n    .then(res => {\n      loader.style.display = 'none';\n      if (!res.ok) throw new Error('Network response was not ok');\n      return res.json();\n    })\n    .then(data => {\n      if (data.hits.length === 0) {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        return [];\n      }\n      return data.hits;\n    })\n    .catch(error => {\n      loader.style.display = 'none';\n      console.error('Fetching error: ', error);\n      iziToast.error({\n        title: 'Error',\n        message: 'Failed to fetch images. Please try again later.',\n      });\n      return [];\n    });\n}\n\nform.addEventListener('submit', function (evt) {\n  evt.preventDefault();\n\n  const searchQuery = evt.target.search.value.trim();\n  if (!searchQuery) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Search field cannot be empty!',\n    });\n    return;\n  }\n\n  fetchImage(searchQuery).then(images => {\n    if (images.length > 0) {\n      gallery.innerHTML = '';\n      gallery.innerHTML = createModalWindow(images);\n\n      lightbox = new SimpleLightbox('.gallery a ', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n\n      lightbox.refresh();\n    } else {\n      iziToast.info({\n        title: 'Info',\n        message: 'No images found for your search query.',\n      });\n    }\n  });\n});\nfunction createModalWindow(images) {\n  return images\n    .map(\n      image => `<a href=\"${image.largeImageURL}\" data-lightbox=\"gallery\" data-title=\"${image.tags}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n      </a>`\n    )\n    .join('');\n}\n"],"names":["loader","form","api","apiKey","imageType","orientation","safeSearch","gallery","lightbox","SimpleLightbox","fetchImage","q","url","res","data","iziToast","error","evt","searchQuery","images","createModalWindow","image"],"mappings":"6vBAcA,MAAMA,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAM,2BACNC,EAAS,qCACTC,EAAY,QACZC,EAAc,cACdC,EAAa,GACbC,EAAU,SAAS,cAAc,UAAU,EAEjD,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAC9C,YAAa,MACb,aAAc,GAChB,CAAC,EAED,SAASC,EAAWC,EAAG,CACrB,MAAMC,EAAM,GAAGV,CAAG,QAAQC,CAAM,MAAM,mBACpCQ,CACJ,CAAG,eAAeP,CAAS,gBAAgBC,CAAW,eAAeC,CAAU,GAC7E,OAAAN,EAAO,MAAM,QAAU,QAEhB,MAAMY,CAAG,EACb,KAAKC,GAAO,CAEX,GADAb,EAAO,MAAM,QAAU,OACnB,CAACa,EAAI,GAAI,MAAM,IAAI,MAAM,6BAA6B,EAC1D,OAAOA,EAAI,MACjB,CAAK,EACA,KAAKC,GACAA,EAAK,KAAK,SAAW,GACvBC,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACZ,CAAS,EACM,IAEFD,EAAK,IACb,EACA,MAAME,IACLhB,EAAO,MAAM,QAAU,OACvB,QAAQ,MAAM,mBAAoBgB,CAAK,EACvCD,EAAS,MAAM,CACb,MAAO,QACP,QAAS,iDACjB,CAAO,EACM,GACR,CACL,CAEAd,EAAK,iBAAiB,SAAU,SAAUgB,EAAK,CAC7CA,EAAI,eAAc,EAElB,MAAMC,EAAcD,EAAI,OAAO,OAAO,MAAM,OAC5C,GAAI,CAACC,EAAa,CAChBH,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+BACf,CAAK,EACD,MACD,CAEDL,EAAWQ,CAAW,EAAE,KAAKC,GAAU,CACjCA,EAAO,OAAS,GAClBZ,EAAQ,UAAY,GACpBA,EAAQ,UAAYa,EAAkBD,CAAM,EAE5CX,EAAW,IAAIC,EAAe,cAAe,CAC3C,aAAc,MACd,aAAc,GACtB,CAAO,EAEDD,EAAS,QAAO,GAEhBO,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,wCACjB,CAAO,CAEP,CAAG,CACH,CAAC,EACD,SAASK,EAAkBD,EAAQ,CACjC,OAAOA,EACJ,IACCE,GAAS,YAAYA,EAAM,aAAa,yCAAyCA,EAAM,IAAI;AAAA,oBAC7EA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA,WAErD,EACA,KAAK,EAAE,CACZ"}